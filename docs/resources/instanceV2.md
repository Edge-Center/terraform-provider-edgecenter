---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "edgecenter_instanceV2 Resource - edgecenter"
subcategory: ""
description: |-
  A cloud instance is a virtual machine in a cloud environment.
---

# edgecenter_instanceV2 (Resource)

A cloud instance is a virtual machine in a cloud environment.

## Example Usage

```terraform
provider "edgecenter" {
  permanent_api_token = "251$d3361.............1b35f26d8"
}

resource "edgecenter_network" "network" {
  name       = "network_example"
  type       = "vxlan"
  region_id  = 1
  project_id = 1
}

resource "edgecenter_subnet" "subnet" {
  name            = "subnet_example"
  cidr            = "192.168.10.0/24"
  network_id      = edgecenter_network.network.id
  dns_nameservers = ["8.8.4.4", "1.1.1.1"]

  host_routes {
    destination = "10.0.3.0/24"
    nexthop     = "10.0.0.13"
  }

  gateway_ip = "192.168.10.1"
  region_id  = 1
  project_id = 1
}

resource "edgecenter_volume" "first_volume" {
  name       = "boot volume"
  type_name  = "ssd_hiiops"
  size       = 5
  image_id   = "f4ce3d30-e29c-4cfd-811f-46f383b6081f"
  region_id  = 1
  project_id = 1
}

resource "edgecenter_volume" "second_volume" {
  name       = "second volume"
  type_name  = "ssd_hiiops"
  size       = 5
  region_id  = 1
  project_id = 1
}

resource "edgecenter_instanceV2" "instance" {
  flavor_id = "g1-standard-2-4"
  name      = "test"

  boot_volumes {
    volume_id  = edgecenter_volume.first_volume.id
    boot_index = 0
  }

  data_volumes {
    volume_id = edgecenter_volume.second_volume.id
  }

  interfaces {
    is_default = true
    type       = "subnet"
    network_id = edgecenter_network.network.id
    subnet_id  = edgecenter_subnet.subnet.id
  }

  metadata_map = {
    some_key = "some_value"
    stage    = "dev"
  }

  configuration {
    key   = "some_key"
    value = "some_data"
  }

  region_id  = 1
  project_id = 1
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `boot_volumes` (Block Set, Min: 1) A set defining the volumes to be attached to the instance. (see [below for nested schema](#nestedblock--boot_volumes))
- `flavor_id` (String) The ID of the flavor to be used for the instance, determining its compute and memory, for example 'g1-standard-2-4'.
- `interfaces` (Block Set, Min: 1) A list defining the network interfaces to be attached to the instance. (see [below for nested schema](#nestedblock--interfaces))

### Optional

- `addresses` (Block List) A list of network addresses associated with the instance, for example "pub_net": [...] (see [below for nested schema](#nestedblock--addresses))
- `allow_app_ports` (Boolean) A boolean indicating whether to allow application ports on the instance.
- `configuration` (Block List) A list of key-value pairs specifying configuration settings for the instance when created 
from a template (marketplace), e.g. {"gitlab_external_url": "https://gitlab/..."} (see [below for nested schema](#nestedblock--configuration))
- `data_volumes` (Block Set) A set defining the volumes to be attached to the instance. (see [below for nested schema](#nestedblock--data_volumes))
- `keypair_name` (String) The name of the key pair to be associated with the instance for SSH access.
- `last_updated` (String) The timestamp of the last update (use with update context).
- `metadata` (Map of String) A map containing metadata, for example tags.
- `name` (String) The name of the instance.
- `name_template` (String) A template used to generate the instance name. This field cannot be used with 'name_templates'.
- `password` (String) The password to be used for accessing the instance. Required with username.
- `project_id` (Number) The uuid of the project. Either 'project_id' or 'project_name' must be specified.
- `project_name` (String) The name of the project. Either 'project_id' or 'project_name' must be specified.
- `region_id` (Number) The uuid of the region. Either 'region_id' or 'region_name' must be specified.
- `region_name` (String) The name of the region. Either 'region_id' or 'region_name' must be specified.
- `server_group` (String) The ID (uuid) of the server group to which the instance should belong.
- `status` (String) The current status of the instance. This is computed automatically and can be used to track the instance's state.
- `user_data` (String) A field for specifying user data to be used for configuring the instance at launch time.
- `username` (String) The username to be used for accessing the instance. Required with password.
- `vm_state` (String) The current virtual machine state of the instance, 
allowing you to start or stop the VM. Possible values are stopped and active.

### Read-Only

- `flavor` (Map of String) A map defining the flavor of the instance, for example, {"flavor_name": "g1-standard-2-4", "ram": 4096, ...}.
- `id` (String) The ID of this resource.

<a id="nestedblock--boot_volumes"></a>
### Nested Schema for `boot_volumes`

Required:

- `boot_index` (Number) If boot_index==0 volumes can not detached. It is used only when creating an instance. This attribute can't be updated
- `volume_id` (String) The ID of the volume.

Optional:

- `attachment_tag` (String) The block device attachment tag (exposed in the metadata).

Read-Only:

- `name` (String) The name assigned to the volume. Defaults to 'system'.
- `size` (Number) The size of the volume, specified in gigabytes (GB).
- `type_name` (String) The type of volume to create. Valid values are 'ssd_hiiops', 'standard', 'cold', and 'ultra'. Defaults to 'standard'.


<a id="nestedblock--interfaces"></a>
### Nested Schema for `interfaces`

Required:

- `type` (String) Available values are 'subnet', 'external', 'reserved_fixed_ip'. You can't create more than one interface on the same subnet

Optional:

- `is_default` (Boolean) This field determines whether this interface will be connected first. 
The first connected interface defines the default routing. WARNING: if you change this attribute, interfaces 
connected earlier than the selected new default interface will be reattached and it's IP addresses can be changed, if the reserved IP address is not used in these 
interfaces. You must always have exactly one interface with set attribute 'is_default.'
- `network_id` (String) Required if type is 'subnet' or 'any_subnet'.
- `reserved_fixed_ip_port_id` (String) required if type is  'reserved_fixed_ip'
- `subnet_id` (String) Required if type is 'subnet'.

Read-Only:

- `ip_address` (String) IP address of the interface.
- `network_name` (String) Name of the network.
- `port_id` (String)


<a id="nestedblock--addresses"></a>
### Nested Schema for `addresses`

Required:

- `net` (Block List, Min: 1) (see [below for nested schema](#nestedblock--addresses--net))

<a id="nestedblock--addresses--net"></a>
### Nested Schema for `addresses.net`

Required:

- `addr` (String) The net ip address, for example '45.147.163.112'.
- `type` (String) The net type, for example 'fixed'.



<a id="nestedblock--configuration"></a>
### Nested Schema for `configuration`

Required:

- `key` (String)
- `value` (String)


<a id="nestedblock--data_volumes"></a>
### Nested Schema for `data_volumes`

Required:

- `volume_id` (String) The ID of the volume.

Optional:

- `attachment_tag` (String) The block device attachment tag (exposed in the metadata).

Read-Only:

- `name` (String) The name assigned to the volume. Defaults to 'system'.
- `size` (Number) The size of the volume, specified in gigabytes (GB).
- `type_name` (String) The type of volume to create. Valid values are 'ssd_hiiops', 'standard', 'cold', and 'ultra'. Defaults to 'standard'.

## Import

Import is supported using the following syntax:

```shell
# import using <project_id>:<region_id>:<instance_id> format
terraform import edgecenter_instanceV2.instance1 1:6:447d2959-8ae0-4ca0-8d47-9f050a3637d7
```
