---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "edgecenter_instanceV2 Resource - edgecenter"
subcategory: ""
description: |-
  A cloud instance is a virtual machine in a cloud environment.
---

# edgecenter_instanceV2 (Resource)

A cloud instance is a virtual machine in a cloud environment.

## Example Usage

```terraform
provider "edgecenter" {
  permanent_api_token = "251$d3361.............1b35f26d8"
}

resource "edgecenter_network" "network" {
  name       = "network_example"
  type       = "vxlan"
  region_id  = 1
  project_id = 1
}

resource "edgecenter_subnet" "subnet" {
  name            = "subnet_example"
  cidr            = "192.168.10.0/24"
  network_id      = edgecenter_network.network.id
  dns_nameservers = ["8.8.4.4", "1.1.1.1"]

  host_routes {
    destination = "10.0.3.0/24"
    nexthop     = "10.0.0.13"
  }

  gateway_ip = "192.168.10.1"
  region_id  = 1
  project_id = 1
}

resource "edgecenter_volume" "first_volume" {
  name       = "boot volume"
  type_name  = "ssd_hiiops"
  size       = 5
  image_id   = "f4ce3d30-e29c-4cfd-811f-46f383b6081f"
  region_id  = 1
  project_id = 1
}

resource "edgecenter_volume" "second_volume" {
  name       = "second volume"
  type_name  = "ssd_hiiops"
  size       = 5
  region_id  = 1
  project_id = 1
}

resource "edgecenter_instanceV2" "instance" {
  flavor_id = "g1-standard-2-4"
  name      = "test"

  boot_volumes {
    volume_id  = edgecenter_volume.first_volume.id
    boot_index = 0
  }

  data_volumes {
    volume_id = edgecenter_volume.second_volume.id
  }

  interface {
    type                   = "subnet"
    network_id             = edgecenter_network.network.id
    subnet_id              = edgecenter_subnet.subnet.id
    security_groups        = ["d75db0b2-58f1-4a11-88c6-a932bb897310"]
    port_security_disabled = true
  }

  metadata_map = {
    some_key = "some_value"
    stage    = "dev"
  }

  configuration {
    key   = "some_key"
    value = "some_data"
  }

  region_id  = 1
  project_id = 1
}

//***
// another one example with one interface to private network and fip to internet
//***

resource "edgecenter_reservedfixedip" "fixed_ip" {
  project_id       = 1
  region_id        = 1
  type             = "ip_address"
  network_id       = "faf6507b-1ff1-4ebf-b540-befd5c09fe06"
  fixed_ip_address = "192.168.13.6"
  is_vip           = false
}

resource "edgecenter_volume" "first_volume" {
  name       = "boot volume"
  type_name  = "ssd_hiiops"
  size       = 10
  image_id   = "6dc4e061-6fab-41f3-91a3-0ba848fb32d9"
  project_id = 1
  region_id  = 1
}

resource "edgecenter_floatingip" "fip" {
  project_id       = 1
  region_id        = 1
  fixed_ip_address = edgecenter_reservedfixedip.fixed_ip.fixed_ip_address
  port_id          = edgecenter_reservedfixedip.fixed_ip.port_id
}


resource "edgecenter_instanceV2" "v" {
  project_id = 1
  region_id  = 1
  name       = "hello"
  flavor_id  = "g1-standard-1-2"

  boot_volumes {
    volume_id  = edgecenter_volume.first_volume.id
    boot_index = 0
  }

  interface {
    type            = "reserved_fixed_ip"
    port_id         = edgecenter_reservedfixedip.fixed_ip.port_id
    fip_source      = "existing"
    existing_fip_id = edgecenter_floatingip.fip.id
    security_groups = ["ada84751-fcca-4491-9249-2dfceb321616"]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `boot_volumes` (Block Set, Min: 1) A set defining the volumes to be attached to the instance. (see [below for nested schema](#nestedblock--boot_volumes))
- `flavor_id` (String) The ID of the flavor to be used for the instance, determining its compute and memory, for example 'g1-standard-2-4'.
- `interface` (Block List, Min: 1) A list defining the network interfaces to be attached to the instance. (see [below for nested schema](#nestedblock--interface))

### Optional

- `addresses` (Block List) A list of network addresses associated with the instance, for example "pub_net": [...] (see [below for nested schema](#nestedblock--addresses))
- `allow_app_ports` (Boolean) A boolean indicating whether to allow application ports on the instance.
- `configuration` (Block List) A list of key-value pairs specifying configuration settings for the instance when created 
from a template (marketplace), e.g. {"gitlab_external_url": "https://gitlab/..."} (see [below for nested schema](#nestedblock--configuration))
- `data_volumes` (Block Set) A set defining the volumes to be attached to the instance. (see [below for nested schema](#nestedblock--data_volumes))
- `flavor` (Map of String) A map defining the flavor of the instance, for example, {"flavor_name": "g1-standard-2-4", "ram": 4096, ...}.
- `keypair_name` (String) The name of the key pair to be associated with the instance for SSH access.
- `last_updated` (String) The timestamp of the last update (use with update context).
- `metadata_map` (Map of String) A map containing metadata, for example tags.
- `name` (String) The name of the instance.
- `name_template` (String) A template used to generate the instance name. This field cannot be used with 'name_templates'.
- `password` (String) The password to be used for accessing the instance. Required with username.
- `project_id` (Number) The uuid of the project. Either 'project_id' or 'project_name' must be specified.
- `project_name` (String) The name of the project. Either 'project_id' or 'project_name' must be specified.
- `region_id` (Number) The uuid of the region. Either 'region_id' or 'region_name' must be specified.
- `region_name` (String) The name of the region. Either 'region_id' or 'region_name' must be specified.
- `server_group` (String) The ID (uuid) of the server group to which the instance should belong.
- `status` (String) The current status of the instance. This is computed automatically and can be used to track the instance's state.
- `user_data` (String) A field for specifying user data to be used for configuring the instance at launch time.
- `username` (String) The username to be used for accessing the instance. Required with password.
- `vm_state` (String) The current virtual machine state of the instance, 
allowing you to start or stop the VM. Possible values are stopped and active.

### Read-Only

- `id` (String) The ID of this resource.
- `security_group` (List of Object) A list of firewall configurations applied to the instance, defined by their ID and name. (see [below for nested schema](#nestedatt--security_group))

<a id="nestedblock--boot_volumes"></a>
### Nested Schema for `boot_volumes`

Required:

- `boot_index` (Number) If boot_index==0 volumes can not detached. It is used only when creating an instance. This attribute can't be updated
- `volume_id` (String) The ID of the volume.

Optional:

- `attachment_tag` (String) The block device attachment tag (exposed in the metadata).

Read-Only:

- `name` (String) The name assigned to the volume. Defaults to 'system'.
- `size` (Number) The size of the volume, specified in gigabytes (GB).
- `type_name` (String) The type of volume to create. Valid values are 'ssd_hiiops', 'standard', 'cold', and 'ultra'. Defaults to 'standard'.


<a id="nestedblock--interface"></a>
### Nested Schema for `interface`

Optional:

- `existing_fip_id` (String)
- `fip_source` (String)
- `ip_address` (String)
- `network_id` (String) Required if type is 'subnet' or 'any_subnet'.
- `order` (Number) Order of attaching interface
- `port_id` (String) required if type is  'reserved_fixed_ip'
- `port_security_disabled` (Boolean)
- `security_groups` (List of String) list of security group IDs
- `subnet_id` (String) Required if type is 'subnet'.
- `type` (String) Available value is 'subnet', 'any_subnet', 'external', 'reserved_fixed_ip'


<a id="nestedblock--addresses"></a>
### Nested Schema for `addresses`

Required:

- `net` (Block List, Min: 1) (see [below for nested schema](#nestedblock--addresses--net))

<a id="nestedblock--addresses--net"></a>
### Nested Schema for `addresses.net`

Required:

- `addr` (String) The net ip address, for example '45.147.163.112'.
- `type` (String) The net type, for example 'fixed'.



<a id="nestedblock--configuration"></a>
### Nested Schema for `configuration`

Required:

- `key` (String)
- `value` (String)


<a id="nestedblock--data_volumes"></a>
### Nested Schema for `data_volumes`

Required:

- `volume_id` (String) The ID of the volume.

Optional:

- `attachment_tag` (String) The block device attachment tag (exposed in the metadata).

Read-Only:

- `name` (String) The name assigned to the volume. Defaults to 'system'.
- `size` (Number) The size of the volume, specified in gigabytes (GB).
- `type_name` (String) The type of volume to create. Valid values are 'ssd_hiiops', 'standard', 'cold', and 'ultra'. Defaults to 'standard'.


<a id="nestedatt--security_group"></a>
### Nested Schema for `security_group`

Read-Only:

- `id` (String)
- `name` (String)

## Import

Import is supported using the following syntax:

```shell
# import using <project_id>:<region_id>:<instance_id> format
terraform import edgecenter_instanceV2.instance1 1:6:447d2959-8ae0-4ca0-8d47-9f050a3637d7
```
